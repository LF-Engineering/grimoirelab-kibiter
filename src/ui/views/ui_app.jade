extends ./chrome.jade

block content
  style.
    * {
      box-sizing: border-box;
    }

    body, html {
      width: 100%;
      height: 100%;
      margin: 0;
      background-color: #F5F5F5;
    }
    .kibanaWelcomeView {
      background-color: #F5F5F5;
    }

    .kibanaWelcomeText {
      color: #222;
      font-size: 14px;
      font-family: Sans-serif;
      margin-top: 20px;
      color: #666;
      animation: fadeIn 1s ease-in-out;
      animation-fill-mode: forwards;
      opacity: 0;
      animation-delay: 1.0s;
    }

    .kibanaLoaderWrap {
      height: 128px;
      width: 128px;
      position: relative;
      margin-top: 40px;
    }

    .kibanaLoader {
      height: 128px;
      width: 128px;
      margin: 0 auto;
      position: relative;
      border: 2px solid transparent;
      border-top: 2px solid #00A69B;
      border-radius: 100%;
      display: block;
      opacity: 0;
      animation: rotation .75s .5s infinite linear, fadeIn 1s .5s ease-in-out forwards;
    }

    .kibanaWelcomeLogoCircle {
      position: absolute;
      left: 4px;
      top: 4px;
      width: 120px;
      height: 120px;
      padding: 20px;
      background-color: #FFF;
      border-radius: 50%;
      animation: bounceIn .5s ease-in-out;
    }

    .kibanaWelcomeLogo {
      background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnNTA3NiIKICAgd2lkdGg9IjUwMCIKICAgaGVpZ2h0PSI1MDAiCiAgIHZpZXdCb3g9IjAgMCA1MDAgNTAwIgogICBzb2RpcG9kaTpkb2NuYW1lPSJsaW51eCBGb3VuZGF0aW9uLnN2ZyIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC45Mi4xIHIxNTM3MSI+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNTA4MiI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGRlZnMKICAgICBpZD0iZGVmczUwODAiIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAiCiAgICAgZ3VpZGV0b2xlcmFuY2U9IjEwIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwMTciCiAgICAgaWQ9Im5hbWVkdmlldzUwNzgiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOnpvb209IjAuMzUzNTUzMzkiCiAgICAgaW5rc2NhcGU6Y3g9Ii0yNzkuODYzNTUiCiAgICAgaW5rc2NhcGU6Y3k9IjE5Ljg4ODEwNSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iLTgiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii04IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnNTA3NiIgLz4KICA8aW1hZ2UKICAgICB3aWR0aD0iNTAwIgogICAgIGhlaWdodD0iNTAwIgogICAgIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiCiAgICAgc3R5bGU9ImltYWdlLXJlbmRlcmluZzpvcHRpbWl6ZVNwZWVkIgogICAgIHhsaW5rOmhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBZlFBQUFIMENBTUFBQUQ4Q0MrNEFBQUFBM05DU1ZRSUNBamI0VS9nQUFBQUdGQk1WRVZNCmFYRUFObVFlbTk0ZW05NEFOMlFTYzZ3QU4yUWZtOTRtdWMrb0FBQUFCblJTVGxNQTZ1Q3dzR0MybEtnbkFBQUV2VWxFUVZSNG5PM1QKZ1czQ1FCQkZRVXh3NkwvalVBS0hsRFgybTJsZ2RmL3BiamVDdGw5YU50RjdSQThTUFVqMElOR0RSQThTUFVqMElOR0RSQThTUFVqMApJTkdEUkE4U1BVajBJTkdEUkE4U1BVajBJTkdEUkE4U1BVajBJTkdEUkE4U1BVajBJTkdEUkE4U1BVajBJTkdEUkE4U1BVajBJTkdEClJBOFNQVWowSU5HRFJBOFNQVWowSU5HRFJBOFNQVWowSU5HRFJBOFNQVWowSU5HRFJBOFNQVWowSU5HRFJBOFNQVWowSU5HRFJBOFMKUFVqMElOR0RSQThTUFVqMElOR0RSQThTUFVqMElOR0RSQThTUFVqMElOR0RSQThTUFVqMElOR0RSQThTUFVqMElOR0RSQThTUFVqMApJTkdEUkE4U1BVajBJTkdEUkE4U1BVajBJTkdEUkE4U1BXZ20rdXNLYjVySklmcFhFVDFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJCjlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFIKZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzJaeTdBT09YdkpFL01FZzBZTkVEeEk5U1BRZzBZTkVEeEk5U1BRZwowWU5FRHhJOVNQUWcwWU5FRHhJOVNQUWcwWU5FRHhJOVNQUWcwWU5FRHhJOVNQUWcwWU5FRHhJOVNQUWcwWU5FRHhJOVNQUWcwWU5FCkR4STlTUFFnMFlORUR4STlTUFFnMFlORUR4STlTUFFnMFlORUR4STlTUFNnbWVqM0FVY3ZlU0l6MFo4RGpsN3lSRVFQRWoxSTlDRFIKZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUApFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJCjlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFIKZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUApFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJCjlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFIKZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUApFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVB1azcwK3pYc3l3a2YyNnIvYno0Vi9TSStpRDdRCmNKbm9LMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFIKZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUEVqMUk5Q0RSZzBRUApFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJOUNEUmcwUVBFajFJCjlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnMFFQRWoxSTlDRFJnNjRUL1lkM3JVZmYKSDk5bytSbWMzeDljcVZRRlZycSszZ0FBQUFCSlJVNUVya0pnZ2c9PQoiCiAgICAgaWQ9ImltYWdlNTA4NCIKICAgICB4PSIwIgogICAgIHk9IjAiIC8+CiAgPHBhdGgKICAgICBzdHlsZT0iZmlsbDojMWY5YmRlO2ZpbGwtb3BhY2l0eToxIgogICAgIGQ9Ik0gMSwzNDkuNSBWIDIwMCBoIDUwIDUwIHYgOTkuNSA5OS41IGggMTAwIDEwMCB2IDUwIDUwIEggMTUxIDEgWiBNIDM1MCw0NDkgdiAtNTAgaCAyNSAyNSBWIDI1MCAxMDEgSCAyNTAuNSAxMDEgdiAyNSAyNSBIIDUxIDEgViA3NiAxIEggMjUwLjUgNTAwIHYgMjQ5IDI0OSBoIC03NSAtNzUgeiIKICAgICBpZD0icGF0aDU2MjkiCiAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgLz4KICA8cGF0aAogICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojMDAzNzY0O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDowLjAwMTtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxO3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICBkPSJtIDEsMSBjIDAuMDY2NTYsNDkuNDU2ODc3IC0wLjIzMjA4NzQ0LDEwMC42MTE2OCAwLDE1MCAzMi45Nzc4MTMsLTAuMDY2MiA2Ny4wOTA4NTgsMC4yMzIwOCAxMDAsMCBsIC0wLjA2ODQsLTUwLjA0NzYzIGggMjk5IGwgMC4wMjU2LDI5MS40NjE5NSAtMC4wMjU2LDYuNTM4MDUgYyAtMTYuOTY0ODYsMC4wNjYyIC0zMy4xMDM3MywtMC4yMzE3OCAtNTAsMCAwLjA2NjIsMzIuOTc3ODEgLTAuMTYzNzIsNjcuMTM4NDcgMC4wNjg0LDEwMC4wNDc2MyA0OS45NTYzMywtMC4wNjY0IDEwMC4xMTIzMSwwLjIzMjA4IDE1MCwwIEMgNDk5LjkzMzcsMzMzLjE4OTk5IDUwMC4yMzIxNiwxNjYuNzQxMzIgNTAwLDEgMzMzLjY5MDY3LDEuMDY2Mzg1NCAxNjcuMjQwNjcsMC43Njc5MjMxIDEsMSBaIgogICAgIGlkPSJwYXRoNjE4NiIKICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjIiAvPgogIDxwYXRoCiAgICAgc3R5bGU9Im9wYWNpdHk6MTtmaWxsOiMxZjliZGU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjAuMDAxO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjE7c3Ryb2tlLWRhc2hhcnJheTpub25lIgogICAgIGQ9Im0gMC45MDk4MDQ5NiwyMDAuODI0NzMgYyAwLjA2NjQyMDcsOTkuMzkzODUgLTAuMTMyNTk1ODYsMTk4Ljg5NzY2IDAuMDk5NDgzNiwyOTguMjIyOSA5OS44OTMyNzE0LC0wLjA2NjQgMTk5Ljg5NjQwMTQsMC4xMzI1OCAyOTkuNzIxMDExNCwtMC4wOTk1IC0wLjA2NjIsLTMyLjk3NzgxIDAuMTMyNTgsLTY2LjA2NTQzIC0wLjA5OTUsLTk4Ljk3NDU5IC02Ni44ODIzMSwwIC0xMzMuNzY0NjIsMCAtMjAwLjY0NjkzMiwwIC0wLjA2NjUxLC02Ni40MDIzIDAuMTMyNTYyLC0xMzIuOTE0NiAtMC4wOTk1LC0xOTkuMjQ4MzIgLTMyLjk3NzY5OCwwLjA2NjIgLTY2LjA2NTYwOCwtMC4xMzI0OCAtOTguOTc0NTg0MDgsMC4wOTk1IHoiCiAgICAgaWQ9InBhdGg2MTg4IgogICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiIC8+Cjwvc3ZnPgo=');
      background-repeat: no-repeat;
      background-size: contain;
      width: 60px;
      height: 60px;
      margin: 10px 0px 10px 10px;
    }

    @keyframes rotation {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(359deg);
      }
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes bounceIn {
      0% {
        opacity: 0;
        transform: scale(.1);
      }
      80% {
        opacity: .5;
        transform: scale(1.2);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }


  .kibanaWelcomeView
    .kibanaLoaderWrap
      .kibanaLoader
      .kibanaWelcomeLogoCircle
        .kibanaWelcomeLogo
    .kibanaWelcomeText
      | #{i18n('UI-WELCOME_MESSAGE')}

  script.
    window.onload = function () {
      var buildNum = #{kibanaPayload.buildNum};
      var cacheParam = buildNum ? '?v=' + buildNum : '';
      function bundleFile(filename) {
        var anchor = document.createElement('a');
        anchor.setAttribute('href', !{JSON.stringify(bundlePath)} + '/' + filename + cacheParam);
        return anchor.href;
      }
      var files = [
        bundleFile('commons.style.css'),
        bundleFile('#{app.id}.style.css'),
        bundleFile('commons.bundle.js'),
        bundleFile('#{app.id}.bundle.js')
      ];

      (function next() {
        var file = files.shift();
        if (!file) return;

        var failure = function () {
          // make subsequent calls to failure() noop
          failure = function () {};

          var err = document.createElement('h1');
          err.style['color'] = 'white';
          err.style['font-family'] = 'monospace';
          err.style['text-align'] = 'center';
          err.style['background'] = '#F44336';
          err.style['padding'] = '25px';
          err.innerText = '#{i18n('UI-WELCOME_ERROR')}';

          document.body.innerHTML = err.outerHTML;
        }

        var type = /\.js(\?.+)?$/.test(file) ? 'script' : 'link';
        var dom = document.createElement(type);
        dom.setAttribute('async', '');
        dom.addEventListener('error', failure);

        if (type === 'script') {
          dom.setAttribute('src', file);
          dom.addEventListener('load', next);
          document.head.appendChild(dom);
        } else {
          dom.setAttribute('rel', 'stylesheet');
          dom.setAttribute('href', file);
          document.head.appendChild(dom);
          next();
        }
      }());
    };
